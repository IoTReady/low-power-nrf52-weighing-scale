<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Smart Weighing Scale: NFC BLE Pairing Library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="2" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Smart Weighing Scale
   </div>
   <!-- PROJECT BRIEF is expected to be a URL -->
   <div id="projectbrief"><a href=https://github.com/IoTReady/weighing_scale_nrf>https://github.com/IoTReady/weighing_scale_nrf</a></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__nfc__ble__pair__lib.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">NFC BLE Pairing Library<div class="ingroups"><a class="el" href="group__nfc__api.html">Nfc_api</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>@tagAPI52 High-level library for BLE Connection Handover pairing using NFC.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gac2b22ae41bddc6148b2ee82f4383837e"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nfc__ble__pair__lib.html#gac2b22ae41bddc6148b2ee82f4383837e">nfc_pairing_mode_t</a> { <br />
&#160;&#160;<a class="el" href="group__nfc__ble__pair__lib.html#ggac2b22ae41bddc6148b2ee82f4383837eaa8daeb56f3af4563301b99c64b623b06">NFC_PAIRING_MODE_JUST_WORKS</a>
, <a class="el" href="group__nfc__ble__pair__lib.html#ggac2b22ae41bddc6148b2ee82f4383837ea7230d7932fa21c40094ac71dde3c7872">NFC_PAIRING_MODE_OOB</a>
, <a class="el" href="group__nfc__ble__pair__lib.html#ggac2b22ae41bddc6148b2ee82f4383837ea99630e0e85cde79b55574bee67e03e41">NFC_PAIRING_MODE_LESC_JUST_WORKS</a>
, <a class="el" href="group__nfc__ble__pair__lib.html#ggac2b22ae41bddc6148b2ee82f4383837ea1358f7c3f5d830ba0fa71b7424f5fa67">NFC_PAIRING_MODE_LESC_OOB</a>
, <br />
&#160;&#160;<a class="el" href="group__nfc__ble__pair__lib.html#ggac2b22ae41bddc6148b2ee82f4383837eadbafc97df40f73eb416150d356232251">NFC_PAIRING_MODE_GENERIC_OOB</a>
, <a class="el" href="group__nfc__ble__pair__lib.html#ggac2b22ae41bddc6148b2ee82f4383837ea9cebcc36a17bf07fbcc6d3ce8b86ce9e">NFC_PAIRING_MODE_CNT</a>
<br />
 }</td></tr>
<tr class="memdesc:gac2b22ae41bddc6148b2ee82f4383837e"><td class="mdescLeft">&#160;</td><td class="mdescRight">NFC pairing types.  <a href="group__nfc__ble__pair__lib.html#gac2b22ae41bddc6148b2ee82f4383837e">More...</a><br /></td></tr>
<tr class="separator:gac2b22ae41bddc6148b2ee82f4383837e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga65f761477f7fdaf9655d279f6fc6b41c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ble__ipsp__errors.html#gaf6c20fb483036617204f12e99e0b997b">ret_code_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nfc__ble__pair__lib.html#ga65f761477f7fdaf9655d279f6fc6b41c">nfc_ble_pair_init</a> (<a class="el" href="structble__advertising__t.html">ble_advertising_t</a> *const p_advertising, <a class="el" href="group__nfc__ble__pair__lib.html#gac2b22ae41bddc6148b2ee82f4383837e">nfc_pairing_mode_t</a> mode)</td></tr>
<tr class="memdesc:ga65f761477f7fdaf9655d279f6fc6b41c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Funtion for initializing NFC tag data and turning on tag emulation.  <a href="group__nfc__ble__pair__lib.html#ga65f761477f7fdaf9655d279f6fc6b41c">More...</a><br /></td></tr>
<tr class="separator:ga65f761477f7fdaf9655d279f6fc6b41c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5edf7750e391c7c5073c2068ee5979ba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ble__ipsp__errors.html#gaf6c20fb483036617204f12e99e0b997b">ret_code_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nfc__ble__pair__lib.html#ga5edf7750e391c7c5073c2068ee5979ba">nfc_ble_pair_mode_set</a> (<a class="el" href="group__nfc__ble__pair__lib.html#gac2b22ae41bddc6148b2ee82f4383837e">nfc_pairing_mode_t</a> mode)</td></tr>
<tr class="memdesc:ga5edf7750e391c7c5073c2068ee5979ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for setting pairing data and BLE security mode.  <a href="group__nfc__ble__pair__lib.html#ga5edf7750e391c7c5073c2068ee5979ba">More...</a><br /></td></tr>
<tr class="separator:ga5edf7750e391c7c5073c2068ee5979ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4decba3b7990e7610eea354a7feb470c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__nfc__ble__pair__lib.html#gac2b22ae41bddc6148b2ee82f4383837e">nfc_pairing_mode_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nfc__ble__pair__lib.html#ga4decba3b7990e7610eea354a7feb470c">nfc_ble_pair_mode_get</a> (void)</td></tr>
<tr class="memdesc:ga4decba3b7990e7610eea354a7feb470c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for obtaining the current pairing mode.  <a href="group__nfc__ble__pair__lib.html#ga4decba3b7990e7610eea354a7feb470c">More...</a><br /></td></tr>
<tr class="separator:ga4decba3b7990e7610eea354a7feb470c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3f03ac3807274cf6350327b377d8d5e6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ble__ipsp__errors.html#gaf6c20fb483036617204f12e99e0b997b">ret_code_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nfc__ble__pair__lib.html#ga3f03ac3807274cf6350327b377d8d5e6">nfc_ble_pair_on_pm_params_req</a> (<a class="el" href="structpm__evt__t.html">pm_evt_t</a> const *p_evt)</td></tr>
<tr class="memdesc:ga3f03ac3807274cf6350327b377d8d5e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for replying to <a class="el" href="group__peer__manager.html#gga4a0e37cf07eb91e1a1808995b957808ba7ebd4003aafe1f0987f8ddacbb13444a">PM_EVT_CONN_SEC_PARAMS_REQ</a>.  <a href="group__nfc__ble__pair__lib.html#ga3f03ac3807274cf6350327b377d8d5e6">More...</a><br /></td></tr>
<tr class="separator:ga3f03ac3807274cf6350327b377d8d5e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>@tagAPI52 High-level library for BLE Connection Handover pairing using NFC. </p>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="gac2b22ae41bddc6148b2ee82f4383837e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac2b22ae41bddc6148b2ee82f4383837e">&#9670;&nbsp;</a></span>nfc_pairing_mode_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__nfc__ble__pair__lib.html#gac2b22ae41bddc6148b2ee82f4383837e">nfc_pairing_mode_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>NFC pairing types. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggac2b22ae41bddc6148b2ee82f4383837eaa8daeb56f3af4563301b99c64b623b06"></a>NFC_PAIRING_MODE_JUST_WORKS&#160;</td><td class="fielddoc"><p>Legacy Just Works pairing without a security key. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggac2b22ae41bddc6148b2ee82f4383837ea7230d7932fa21c40094ac71dde3c7872"></a>NFC_PAIRING_MODE_OOB&#160;</td><td class="fielddoc"><p>Legacy OOB pairing with a Temporary Key shared through NFC tag data. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggac2b22ae41bddc6148b2ee82f4383837ea99630e0e85cde79b55574bee67e03e41"></a>NFC_PAIRING_MODE_LESC_JUST_WORKS&#160;</td><td class="fielddoc"><p>LESC pairing without authentication data. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggac2b22ae41bddc6148b2ee82f4383837ea1358f7c3f5d830ba0fa71b7424f5fa67"></a>NFC_PAIRING_MODE_LESC_OOB&#160;</td><td class="fielddoc"><p>LESC pairing with OOB authentication data. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggac2b22ae41bddc6148b2ee82f4383837eadbafc97df40f73eb416150d356232251"></a>NFC_PAIRING_MODE_GENERIC_OOB&#160;</td><td class="fielddoc"><p>OOB pairing with fallback from LESC to Legacy mode. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggac2b22ae41bddc6148b2ee82f4383837ea9cebcc36a17bf07fbcc6d3ce8b86ce9e"></a>NFC_PAIRING_MODE_CNT&#160;</td><td class="fielddoc"><p>Number of available pairing modes. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga65f761477f7fdaf9655d279f6fc6b41c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga65f761477f7fdaf9655d279f6fc6b41c">&#9670;&nbsp;</a></span>nfc_ble_pair_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ble__ipsp__errors.html#gaf6c20fb483036617204f12e99e0b997b">ret_code_t</a> nfc_ble_pair_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structble__advertising__t.html">ble_advertising_t</a> *const&#160;</td>
          <td class="paramname"><em>p_advertising</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__nfc__ble__pair__lib.html#gac2b22ae41bddc6148b2ee82f4383837e">nfc_pairing_mode_t</a>&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Funtion for initializing NFC tag data and turning on tag emulation. </p>
<dl class="section warning"><dt>Warning</dt><dd>It is assumed that Peer Manager has already been initialized before calling this function. It is also assumed that BLE advertising has already been initialized and it is configured to run in the BLE_ADV_MODE_FAST mode.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mode</td><td>Pairing mode, this is the value of the <a class="el" href="group__nfc__ble__pair__lib.html#gac2b22ae41bddc6148b2ee82f4383837e">nfc_pairing_mode_t</a> enum. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_advertising</td><td>Pointer to the advertising module instance.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NRF_SUCCESS</td><td>If NFC has been initialized properly. </td></tr>
    <tr><td class="paramname">NRF_ERROR_INVALID_PARAM</td><td>If pairing mode is invalid. </td></tr>
    <tr><td class="paramname">NRF_ERROR_NULL</td><td>If pointer to the advertising module instance is NULL. </td></tr>
    <tr><td class="paramname">Other</td><td>Other error codes might be returned depending on used modules. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga4decba3b7990e7610eea354a7feb470c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4decba3b7990e7610eea354a7feb470c">&#9670;&nbsp;</a></span>nfc_ble_pair_mode_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__nfc__ble__pair__lib.html#gac2b22ae41bddc6148b2ee82f4383837e">nfc_pairing_mode_t</a> nfc_ble_pair_mode_get </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for obtaining the current pairing mode. </p>
<dl class="section return"><dt>Returns</dt><dd>Current pairing mode. </dd></dl>

</div>
</div>
<a id="ga5edf7750e391c7c5073c2068ee5979ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5edf7750e391c7c5073c2068ee5979ba">&#9670;&nbsp;</a></span>nfc_ble_pair_mode_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ble__ipsp__errors.html#gaf6c20fb483036617204f12e99e0b997b">ret_code_t</a> nfc_ble_pair_mode_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__nfc__ble__pair__lib.html#gac2b22ae41bddc6148b2ee82f4383837e">nfc_pairing_mode_t</a>&#160;</td>
          <td class="paramname"><em>mode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for setting pairing data and BLE security mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mode</td><td>New pairing mode, this is the value of the <a class="el" href="group__nfc__ble__pair__lib.html#gac2b22ae41bddc6148b2ee82f4383837e">nfc_pairing_mode_t</a> enum.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NRF_SUCCESS</td><td>If new pairing mode has been set correctly. </td></tr>
    <tr><td class="paramname">NRF_ERROR_INVALID_PARAM</td><td>If pairing mode is invalid. </td></tr>
    <tr><td class="paramname">Other</td><td>Other error codes might be returned depending on used modules. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga3f03ac3807274cf6350327b377d8d5e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3f03ac3807274cf6350327b377d8d5e6">&#9670;&nbsp;</a></span>nfc_ble_pair_on_pm_params_req()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ble__ipsp__errors.html#gaf6c20fb483036617204f12e99e0b997b">ret_code_t</a> nfc_ble_pair_on_pm_params_req </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpm__evt__t.html">pm_evt_t</a> const *&#160;</td>
          <td class="paramname"><em>p_evt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for replying to <a class="el" href="group__peer__manager.html#gga4a0e37cf07eb91e1a1808995b957808ba7ebd4003aafe1f0987f8ddacbb13444a">PM_EVT_CONN_SEC_PARAMS_REQ</a>. </p>
<p>This function is used to allow dynamic changes in the Peer Manager security parameters depending on security parameters obtained from the peer. This is essential for dynamic switching between Legacy OOB and LESC OOB pairing modes when pairing library works in <a class="el" href="group__nfc__ble__pair__lib.html#ggac2b22ae41bddc6148b2ee82f4383837eadbafc97df40f73eb416150d356232251">NFC_PAIRING_MODE_GENERIC_OOB</a> mode.</p>
<dl class="section note"><dt>Note</dt><dd>This function invokes the <a class="el" href="group__peer__manager.html#ga81e56cb4bade3444d360211e136a55f1">pm_conn_sec_params_reply</a> function.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_evt</td><td>Pointer to the Peer Manager event struct with information about peer security parameters.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NRF_SUCCESS</td><td>If proper reply has been sent or library does not need to reply. </td></tr>
    <tr><td class="paramname">NRF_ERROR_NULL</td><td>If pointer to the Peer Manager event is NULL. </td></tr>
    <tr><td class="paramname">Other</td><td>Other error codes might be returned by the <a class="el" href="group__peer__manager.html#ga81e56cb4bade3444d360211e136a55f1">pm_conn_sec_params_reply</a> function. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://iotready.co"> IoTReady </a><img class="footer" src="logo.png" width="30" height="30" alt="IoTReady"/></a></li>
  </ul>
</div>
</body>
</html>
