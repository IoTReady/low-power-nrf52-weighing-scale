<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Smart Weighing Scale: Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="2" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Smart Weighing Scale
   </div>
   <!-- PROJECT BRIEF is expected to be a URL -->
   <div id="projectbrief"><a href=https://github.com/IoTReady/weighing_scale_nrf>https://github.com/IoTReady/weighing_scale_nrf</a></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group___b_l_e___l2_c_a_p___f_u_n_c_t_i_o_n_s.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Functions<div class="ingroups"><a class="el" href="group___b_l_e___l2_c_a_p.html">Logical Link Control and Adaptation Protocol (L2CAP)</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gac7d37b8f9b821b800861baaab590dddc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_l_e___l2_c_a_p___f_u_n_c_t_i_o_n_s.html#gac7d37b8f9b821b800861baaab590dddc">SVCALL</a> (<a class="el" href="group___b_l_e___l2_c_a_p___e_n_u_m_e_r_a_t_i_o_n_s.html#gga08e7b23691ec76610bbd89735c642322a100e1ed0409b3ab9569eee9e07752d04">SD_BLE_L2CAP_CH_SETUP</a>, uint32_t, sd_ble_l2cap_ch_setup(uint16_t conn_handle, uint16_t *p_local_cid, <a class="el" href="structble__l2cap__ch__setup__params__t.html">ble_l2cap_ch_setup_params_t</a> const *p_params))</td></tr>
<tr class="memdesc:gac7d37b8f9b821b800861baaab590dddc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set up an L2CAP channel.  <a href="group___b_l_e___l2_c_a_p___f_u_n_c_t_i_o_n_s.html#gac7d37b8f9b821b800861baaab590dddc">More...</a><br /></td></tr>
<tr class="separator:gac7d37b8f9b821b800861baaab590dddc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga190d534da6261d036d68fcd46c12fd1f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_l_e___l2_c_a_p___f_u_n_c_t_i_o_n_s.html#ga190d534da6261d036d68fcd46c12fd1f">SVCALL</a> (<a class="el" href="group___b_l_e___l2_c_a_p___e_n_u_m_e_r_a_t_i_o_n_s.html#gga08e7b23691ec76610bbd89735c642322a91c851b06289554062d71add1b1edbee">SD_BLE_L2CAP_CH_RELEASE</a>, uint32_t, sd_ble_l2cap_ch_release(uint16_t conn_handle, uint16_t local_cid))</td></tr>
<tr class="memdesc:ga190d534da6261d036d68fcd46c12fd1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release an L2CAP channel.  <a href="group___b_l_e___l2_c_a_p___f_u_n_c_t_i_o_n_s.html#ga190d534da6261d036d68fcd46c12fd1f">More...</a><br /></td></tr>
<tr class="separator:ga190d534da6261d036d68fcd46c12fd1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabfce997bf2a4fda42da9ac2c9a063581"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_l_e___l2_c_a_p___f_u_n_c_t_i_o_n_s.html#gabfce997bf2a4fda42da9ac2c9a063581">SVCALL</a> (<a class="el" href="group___b_l_e___l2_c_a_p___e_n_u_m_e_r_a_t_i_o_n_s.html#gga08e7b23691ec76610bbd89735c642322aa78b2d227ffa65b8c3a6058083acfbd4">SD_BLE_L2CAP_CH_RX</a>, uint32_t, sd_ble_l2cap_ch_rx(uint16_t conn_handle, uint16_t local_cid, <a class="el" href="structble__data__t.html">ble_data_t</a> const *p_sdu_buf))</td></tr>
<tr class="memdesc:gabfce997bf2a4fda42da9ac2c9a063581"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive an SDU on an L2CAP channel.  <a href="group___b_l_e___l2_c_a_p___f_u_n_c_t_i_o_n_s.html#gabfce997bf2a4fda42da9ac2c9a063581">More...</a><br /></td></tr>
<tr class="separator:gabfce997bf2a4fda42da9ac2c9a063581"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7a328dd7e967db3be227ba4c859ac4ad"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_l_e___l2_c_a_p___f_u_n_c_t_i_o_n_s.html#ga7a328dd7e967db3be227ba4c859ac4ad">SVCALL</a> (<a class="el" href="group___b_l_e___l2_c_a_p___e_n_u_m_e_r_a_t_i_o_n_s.html#gga08e7b23691ec76610bbd89735c642322a56cc35179fb851b9abac147c20ffb488">SD_BLE_L2CAP_CH_TX</a>, uint32_t, sd_ble_l2cap_ch_tx(uint16_t conn_handle, uint16_t local_cid, <a class="el" href="structble__data__t.html">ble_data_t</a> const *p_sdu_buf))</td></tr>
<tr class="memdesc:ga7a328dd7e967db3be227ba4c859ac4ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmit an SDU on an L2CAP channel.  <a href="group___b_l_e___l2_c_a_p___f_u_n_c_t_i_o_n_s.html#ga7a328dd7e967db3be227ba4c859ac4ad">More...</a><br /></td></tr>
<tr class="separator:ga7a328dd7e967db3be227ba4c859ac4ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacac6f2382662efeaf03e5358ab38f69c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___b_l_e___l2_c_a_p___f_u_n_c_t_i_o_n_s.html#gacac6f2382662efeaf03e5358ab38f69c">SVCALL</a> (<a class="el" href="group___b_l_e___l2_c_a_p___e_n_u_m_e_r_a_t_i_o_n_s.html#gga08e7b23691ec76610bbd89735c642322a3c0dbe2f60c493793268a1fc29e3f466">SD_BLE_L2CAP_CH_FLOW_CONTROL</a>, uint32_t, sd_ble_l2cap_ch_flow_control(uint16_t conn_handle, uint16_t local_cid, uint16_t credits, uint16_t *p_credits))</td></tr>
<tr class="memdesc:gacac6f2382662efeaf03e5358ab38f69c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Advanced SDU reception flow control.  <a href="group___b_l_e___l2_c_a_p___f_u_n_c_t_i_o_n_s.html#gacac6f2382662efeaf03e5358ab38f69c">More...</a><br /></td></tr>
<tr class="separator:gacac6f2382662efeaf03e5358ab38f69c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="gacac6f2382662efeaf03e5358ab38f69c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacac6f2382662efeaf03e5358ab38f69c">&#9670;&nbsp;</a></span>SVCALL() <span class="overload">[1/5]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SVCALL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___b_l_e___l2_c_a_p___e_n_u_m_e_r_a_t_i_o_n_s.html#gga08e7b23691ec76610bbd89735c642322a3c0dbe2f60c493793268a1fc29e3f466">SD_BLE_L2CAP_CH_FLOW_CONTROL</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sd_ble_l2cap_ch_flow_control(uint16_t conn_handle, uint16_t local_cid, uint16_t credits, uint16_t *p_credits)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Advanced SDU reception flow control. </p>
<p>Adjust the way the SoftDevice issues credits to the peer. This may issue additional credits to the peer using an LE Flow Control Credit packet.</p>
<p>@mscs @mmsc{BLE_L2CAP_CH_FLOW_CONTROL_MSC} @endmscs</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conn_handle</td><td>Connection Handle. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">local_cid</td><td>Local Channel ID of the L2CAP channel or <a class="el" href="group___b_l_e___l2_c_a_p___d_e_f_i_n_e_s.html#gaf3346d406893055ab1cb3cf04ce094c6">BLE_L2CAP_CID_INVALID</a> to set the value that will be used for newly created channels. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">credits</td><td>Number of credits that the SoftDevice will make sure the peer has every time it starts using a new reception buffer.<ul>
<li><a class="el" href="group___b_l_e___l2_c_a_p___d_e_f_i_n_e_s.html#ga6f1e1ede53d001dd5fac3670a0821fe8">BLE_L2CAP_CREDITS_DEFAULT</a> is the default value the SoftDevice will use if this function is not called.</li>
<li>If set to zero, the SoftDevice will stop issuing credits for new reception buffers the application provides or has provided. SDU reception that is currently ongoing will be allowed to complete. </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p_credits</td><td>NULL or pointer to a uint16_t. If a valid pointer is provided, it will be written by the SoftDevice with the number of credits that is or will be available to the peer. If the value written by the SoftDevice is 0 when credits parameter was set to 0, the peer will not be able to send more data until more credits are provided by calling this function again with credits &gt; 0. This parameter is ignored when local_cid is set to <a class="el" href="group___b_l_e___l2_c_a_p___d_e_f_i_n_e_s.html#gaf3346d406893055ab1cb3cf04ce094c6">BLE_L2CAP_CID_INVALID</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Application should take care when setting number of credits higher than default value. In this case the application must make sure that the SoftDevice always has reception buffers available (see sd_ble_l2cap_ch_rx) for that channel. If the SoftDevice does not have such buffers available, packets may be NACKed on the Link Layer and all Bluetooth traffic on the connection handle may be stalled until the SoftDevice again has an available reception buffer. This applies even if the application has used this call to set the credits back to default, or zero.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__nrf__error.html#ga7e6367efeaac363d8cf024940b4ec123" title="Successful command.">NRF_SUCCESS</a></td><td>Flow control parameters accepted. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__nrf__error.html#gabc562e4ddfe2f427666a3acdd0b469a3" title="Bad Memory Address.">NRF_ERROR_INVALID_ADDR</a></td><td>Invalid pointer supplied. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__ble__err.html#gabdc27cbc2ffac4a50640a0ce992c03af">BLE_ERROR_INVALID_CONN_HANDLE</a></td><td>Invalid Connection Handle. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__nrf__error.html#gaf0aff2ba7864b34a36b4a96986e1851e" title="Invalid state, operation disallowed in this state.">NRF_ERROR_INVALID_STATE</a></td><td>Invalid State to perform operation (Setup or release is in progress for an L2CAP channel). </td></tr>
    <tr><td class="paramname"><a class="el" href="group__nrf__error.html#ga349d25ada15be023e0d507f45ada682c" title="Not found.">NRF_ERROR_NOT_FOUND</a></td><td>CID not found. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga190d534da6261d036d68fcd46c12fd1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga190d534da6261d036d68fcd46c12fd1f">&#9670;&nbsp;</a></span>SVCALL() <span class="overload">[2/5]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SVCALL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___b_l_e___l2_c_a_p___e_n_u_m_e_r_a_t_i_o_n_s.html#gga08e7b23691ec76610bbd89735c642322a91c851b06289554062d71add1b1edbee">SD_BLE_L2CAP_CH_RELEASE</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sd_ble_l2cap_ch_release(uint16_t conn_handle, uint16_t local_cid)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release an L2CAP channel. </p>
<p>This sends a Disconnection Request packet to a peer.</p>
<p>@events @event{<a class="el" href="group___b_l_e___l2_c_a_p___e_n_u_m_e_r_a_t_i_o_n_s.html#gga200c8684032d8e5fe10d295b2f3a1555a73b33f506c7aec79a45ca07c1447d135">BLE_L2CAP_EVT_CH_RELEASED</a>, Release complete.} @endevents</p>
<p>@mscs @mmsc{BLE_L2CAP_CH_RELEASE_MSC} @endmscs</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conn_handle</td><td>Connection Handle. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">local_cid</td><td>Local Channel ID of the L2CAP channel.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__nrf__error.html#ga7e6367efeaac363d8cf024940b4ec123" title="Successful command.">NRF_SUCCESS</a></td><td>Successfully queued request for transmission. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__ble__err.html#gabdc27cbc2ffac4a50640a0ce992c03af">BLE_ERROR_INVALID_CONN_HANDLE</a></td><td>Invalid Connection Handle. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__nrf__error.html#gaf0aff2ba7864b34a36b4a96986e1851e" title="Invalid state, operation disallowed in this state.">NRF_ERROR_INVALID_STATE</a></td><td>Invalid State to perform operation (Setup or release is in progress for the L2CAP channel). </td></tr>
    <tr><td class="paramname"><a class="el" href="group__nrf__error.html#ga349d25ada15be023e0d507f45ada682c" title="Not found.">NRF_ERROR_NOT_FOUND</a></td><td>CID not found. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gabfce997bf2a4fda42da9ac2c9a063581"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabfce997bf2a4fda42da9ac2c9a063581">&#9670;&nbsp;</a></span>SVCALL() <span class="overload">[3/5]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SVCALL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___b_l_e___l2_c_a_p___e_n_u_m_e_r_a_t_i_o_n_s.html#gga08e7b23691ec76610bbd89735c642322aa78b2d227ffa65b8c3a6058083acfbd4">SD_BLE_L2CAP_CH_RX</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sd_ble_l2cap_ch_rx(uint16_t conn_handle, uint16_t local_cid, <a class="el" href="structble__data__t.html">ble_data_t</a> const *p_sdu_buf)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive an SDU on an L2CAP channel. </p>
<p>This may issue additional credits to the peer using an LE Flow Control Credit packet.</p>
<dl class="section note"><dt>Note</dt><dd>A call to this function will require the application to keep the memory pointed by <a class="el" href="structble__data__t.html#a27e00a7c558e6ca3f51a140a63cee7f6">ble_data_t::p_data</a> alive until the SDU data buffer is returned in <a class="el" href="group___b_l_e___l2_c_a_p___e_n_u_m_e_r_a_t_i_o_n_s.html#gga200c8684032d8e5fe10d295b2f3a1555a0330b9c28f1abb1451fa8753d6c44596">BLE_L2CAP_EVT_CH_RX</a> or <a class="el" href="group___b_l_e___l2_c_a_p___e_n_u_m_e_r_a_t_i_o_n_s.html#gga200c8684032d8e5fe10d295b2f3a1555aa883f335f22df2b322374b7364089f18">BLE_L2CAP_EVT_CH_SDU_BUF_RELEASED</a> event.</dd>
<dd>
The SoftDevice can queue up to <a class="el" href="structble__l2cap__conn__cfg__t.html#aaf42c72a2bc9c0aa8528b97240b0d9ed">ble_l2cap_conn_cfg_t::rx_queue_size</a> SDU data buffers for reception per L2CAP channel.</dd></dl>
<p>@events @event{<a class="el" href="group___b_l_e___l2_c_a_p___e_n_u_m_e_r_a_t_i_o_n_s.html#gga200c8684032d8e5fe10d295b2f3a1555a0330b9c28f1abb1451fa8753d6c44596">BLE_L2CAP_EVT_CH_RX</a>, The SDU is received.} @endevents</p>
<p>@mscs @mmsc{BLE_L2CAP_CH_RX_MSC} @endmscs</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conn_handle</td><td>Connection Handle. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">local_cid</td><td>Local Channel ID of the L2CAP channel. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_sdu_buf</td><td>Pointer to the SDU data buffer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__nrf__error.html#ga7e6367efeaac363d8cf024940b4ec123" title="Successful command.">NRF_SUCCESS</a></td><td>Buffer accepted. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__nrf__error.html#gabc562e4ddfe2f427666a3acdd0b469a3" title="Bad Memory Address.">NRF_ERROR_INVALID_ADDR</a></td><td>Invalid pointer supplied. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__ble__err.html#gabdc27cbc2ffac4a50640a0ce992c03af">BLE_ERROR_INVALID_CONN_HANDLE</a></td><td>Invalid Connection Handle. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__nrf__error.html#gaf0aff2ba7864b34a36b4a96986e1851e" title="Invalid state, operation disallowed in this state.">NRF_ERROR_INVALID_STATE</a></td><td>Invalid State to perform operation (Setup or release is in progress for an L2CAP channel). </td></tr>
    <tr><td class="paramname"><a class="el" href="group__nrf__error.html#ga349d25ada15be023e0d507f45ada682c" title="Not found.">NRF_ERROR_NOT_FOUND</a></td><td>CID not found. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__nrf__error.html#gac94383171545e604e8347a044e8be13f" title="Not enough resources for operation.">NRF_ERROR_RESOURCES</a></td><td>Too many SDU data buffers supplied. Wait for a <a class="el" href="group___b_l_e___l2_c_a_p___e_n_u_m_e_r_a_t_i_o_n_s.html#gga200c8684032d8e5fe10d295b2f3a1555a0330b9c28f1abb1451fa8753d6c44596">BLE_L2CAP_EVT_CH_RX</a> event and retry. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gac7d37b8f9b821b800861baaab590dddc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac7d37b8f9b821b800861baaab590dddc">&#9670;&nbsp;</a></span>SVCALL() <span class="overload">[4/5]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SVCALL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___b_l_e___l2_c_a_p___e_n_u_m_e_r_a_t_i_o_n_s.html#gga08e7b23691ec76610bbd89735c642322a100e1ed0409b3ab9569eee9e07752d04">SD_BLE_L2CAP_CH_SETUP</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sd_ble_l2cap_ch_setup(uint16_t conn_handle, uint16_t *p_local_cid, <a class="el" href="structble__l2cap__ch__setup__params__t.html">ble_l2cap_ch_setup_params_t</a> const *p_params)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set up an L2CAP channel. </p>
<p>This function is used to:</p><ul>
<li>Request setup of an L2CAP channel: sends an LE Credit Based Connection Request packet to a peer.</li>
<li>Reply to a setup request of an L2CAP channel (if called in response to a <a class="el" href="group___b_l_e___l2_c_a_p___e_n_u_m_e_r_a_t_i_o_n_s.html#gga200c8684032d8e5fe10d295b2f3a1555ae13b48b3212c3e05df684f51257df2f0">BLE_L2CAP_EVT_CH_SETUP_REQUEST</a> event): sends an LE Credit Based Connection Response packet to a peer.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>A call to this function will require the application to keep the SDU data buffer alive until the SDU data buffer is returned in <a class="el" href="group___b_l_e___l2_c_a_p___e_n_u_m_e_r_a_t_i_o_n_s.html#gga200c8684032d8e5fe10d295b2f3a1555a0330b9c28f1abb1451fa8753d6c44596">BLE_L2CAP_EVT_CH_RX</a> or <a class="el" href="group___b_l_e___l2_c_a_p___e_n_u_m_e_r_a_t_i_o_n_s.html#gga200c8684032d8e5fe10d295b2f3a1555aa883f335f22df2b322374b7364089f18">BLE_L2CAP_EVT_CH_SDU_BUF_RELEASED</a> event.</dd></dl>
<p>@events @event{<a class="el" href="group___b_l_e___l2_c_a_p___e_n_u_m_e_r_a_t_i_o_n_s.html#gga200c8684032d8e5fe10d295b2f3a1555a56f73fdbd26acabcd77f6dea45585b78">BLE_L2CAP_EVT_CH_SETUP</a>, Setup successful.} @event{<a class="el" href="group___b_l_e___l2_c_a_p___e_n_u_m_e_r_a_t_i_o_n_s.html#gga200c8684032d8e5fe10d295b2f3a1555a8f364b20fdca5239e35fc666a681aacf">BLE_L2CAP_EVT_CH_SETUP_REFUSED</a>, Setup failed.} @endevents</p>
<p>@mscs @mmsc{BLE_L2CAP_CH_SETUP_MSC} @endmscs</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conn_handle</td><td>Connection Handle. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">p_local_cid</td><td>Pointer to a uint16_t containing Local Channel ID of the L2CAP channel:<ul>
<li>As input: <a class="el" href="group___b_l_e___l2_c_a_p___d_e_f_i_n_e_s.html#gaf3346d406893055ab1cb3cf04ce094c6">BLE_L2CAP_CID_INVALID</a> when requesting setup of an L2CAP channel or local_cid provided in the <a class="el" href="group___b_l_e___l2_c_a_p___e_n_u_m_e_r_a_t_i_o_n_s.html#gga200c8684032d8e5fe10d295b2f3a1555ae13b48b3212c3e05df684f51257df2f0">BLE_L2CAP_EVT_CH_SETUP_REQUEST</a> event when replying to a setup request of an L2CAP channel.</li>
<li>As output: local_cid for this channel. </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_params</td><td>L2CAP channel parameters.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__nrf__error.html#ga7e6367efeaac363d8cf024940b4ec123" title="Successful command.">NRF_SUCCESS</a></td><td>Successfully queued request or response for transmission. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__nrf__error.html#ga5d2d8608f6d6a0329f58961a969e946e" title="Busy.">NRF_ERROR_BUSY</a></td><td>The stack is busy, process pending events and retry. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__nrf__error.html#gabc562e4ddfe2f427666a3acdd0b469a3" title="Bad Memory Address.">NRF_ERROR_INVALID_ADDR</a></td><td>Invalid pointer supplied. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__ble__err.html#gabdc27cbc2ffac4a50640a0ce992c03af">BLE_ERROR_INVALID_CONN_HANDLE</a></td><td>Invalid Connection Handle. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__nrf__error.html#ga0a5831cf5092e0dd43a01869676ee076" title="Invalid Parameter.">NRF_ERROR_INVALID_PARAM</a></td><td>Invalid parameter(s) supplied. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__nrf__error.html#ga59fe2a8fe184005aefa0835c7ff400fd" title="Invalid Length.">NRF_ERROR_INVALID_LENGTH</a></td><td>Supplied higher rx_mps than has been configured on this link. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__nrf__error.html#gaf0aff2ba7864b34a36b4a96986e1851e" title="Invalid state, operation disallowed in this state.">NRF_ERROR_INVALID_STATE</a></td><td>Invalid State to perform operation (L2CAP channel already set up). </td></tr>
    <tr><td class="paramname"><a class="el" href="group__nrf__error.html#ga349d25ada15be023e0d507f45ada682c" title="Not found.">NRF_ERROR_NOT_FOUND</a></td><td>CID not found. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__nrf__error.html#gac94383171545e604e8347a044e8be13f" title="Not enough resources for operation.">NRF_ERROR_RESOURCES</a></td><td>The limit has been reached for available L2CAP channels, see <a class="el" href="structble__l2cap__conn__cfg__t.html#ab0b0e4ae696dc4fd5271b86ea6cda0c5">ble_l2cap_conn_cfg_t::ch_count</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga7a328dd7e967db3be227ba4c859ac4ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7a328dd7e967db3be227ba4c859ac4ad">&#9670;&nbsp;</a></span>SVCALL() <span class="overload">[5/5]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SVCALL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___b_l_e___l2_c_a_p___e_n_u_m_e_r_a_t_i_o_n_s.html#gga08e7b23691ec76610bbd89735c642322a56cc35179fb851b9abac147c20ffb488">SD_BLE_L2CAP_CH_TX</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sd_ble_l2cap_ch_tx(uint16_t conn_handle, uint16_t local_cid, <a class="el" href="structble__data__t.html">ble_data_t</a> const *p_sdu_buf)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transmit an SDU on an L2CAP channel. </p>
<dl class="section note"><dt>Note</dt><dd>A call to this function will require the application to keep the memory pointed by <a class="el" href="structble__data__t.html#a27e00a7c558e6ca3f51a140a63cee7f6">ble_data_t::p_data</a> alive until the SDU data buffer is returned in <a class="el" href="group___b_l_e___l2_c_a_p___e_n_u_m_e_r_a_t_i_o_n_s.html#gga200c8684032d8e5fe10d295b2f3a1555afa2b40e6fe7691496fded82199a5e7a1">BLE_L2CAP_EVT_CH_TX</a> or <a class="el" href="group___b_l_e___l2_c_a_p___e_n_u_m_e_r_a_t_i_o_n_s.html#gga200c8684032d8e5fe10d295b2f3a1555aa883f335f22df2b322374b7364089f18">BLE_L2CAP_EVT_CH_SDU_BUF_RELEASED</a> event.</dd>
<dd>
The SoftDevice can queue up to <a class="el" href="structble__l2cap__conn__cfg__t.html#a99be5e7196666c10883e4464b6756b85">ble_l2cap_conn_cfg_t::tx_queue_size</a> SDUs for transmission per L2CAP channel.</dd>
<dd>
The application can keep track of the available credits for transmission by following the procedure below:<ul>
<li>Store initial credits given by the peer in a variable. (Initial credits are provided in a <a class="el" href="group___b_l_e___l2_c_a_p___e_n_u_m_e_r_a_t_i_o_n_s.html#gga200c8684032d8e5fe10d295b2f3a1555a56f73fdbd26acabcd77f6dea45585b78">BLE_L2CAP_EVT_CH_SETUP</a> event.)</li>
<li>Decrement the variable, which stores the currently available credits, by ceiling((<a class="el" href="structble__data__t.html#a629da51916cf493abf5e2200dd438961">ble_data_t::len</a> + 2) / tx_mps) when a call to this function returns <a class="el" href="group__nrf__error.html#ga7e6367efeaac363d8cf024940b4ec123">NRF_SUCCESS</a>. (tx_mps is provided in a <a class="el" href="group___b_l_e___l2_c_a_p___e_n_u_m_e_r_a_t_i_o_n_s.html#gga200c8684032d8e5fe10d295b2f3a1555a56f73fdbd26acabcd77f6dea45585b78">BLE_L2CAP_EVT_CH_SETUP</a> event.)</li>
<li>Increment the variable, which stores the currently available credits, by additional credits given by the peer in a <a class="el" href="group___b_l_e___l2_c_a_p___e_n_u_m_e_r_a_t_i_o_n_s.html#gga200c8684032d8e5fe10d295b2f3a1555a6791beb4bdd853e07abcd7df04d83320">BLE_L2CAP_EVT_CH_CREDIT</a> event.</li>
</ul>
</dd></dl>
<p>@events @event{<a class="el" href="group___b_l_e___l2_c_a_p___e_n_u_m_e_r_a_t_i_o_n_s.html#gga200c8684032d8e5fe10d295b2f3a1555afa2b40e6fe7691496fded82199a5e7a1">BLE_L2CAP_EVT_CH_TX</a>, The SDU is transmitted.} @endevents</p>
<p>@mscs @mmsc{BLE_L2CAP_CH_TX_MSC} @endmscs</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conn_handle</td><td>Connection Handle. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">local_cid</td><td>Local Channel ID of the L2CAP channel. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_sdu_buf</td><td>Pointer to the SDU data buffer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__nrf__error.html#ga7e6367efeaac363d8cf024940b4ec123" title="Successful command.">NRF_SUCCESS</a></td><td>Successfully queued L2CAP SDU for transmission. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__nrf__error.html#gabc562e4ddfe2f427666a3acdd0b469a3" title="Bad Memory Address.">NRF_ERROR_INVALID_ADDR</a></td><td>Invalid pointer supplied. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__ble__err.html#gabdc27cbc2ffac4a50640a0ce992c03af">BLE_ERROR_INVALID_CONN_HANDLE</a></td><td>Invalid Connection Handle. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__nrf__error.html#gaf0aff2ba7864b34a36b4a96986e1851e" title="Invalid state, operation disallowed in this state.">NRF_ERROR_INVALID_STATE</a></td><td>Invalid State to perform operation (Setup or release is in progress for the L2CAP channel). </td></tr>
    <tr><td class="paramname"><a class="el" href="group__nrf__error.html#ga349d25ada15be023e0d507f45ada682c" title="Not found.">NRF_ERROR_NOT_FOUND</a></td><td>CID not found. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__nrf__error.html#ga4c61f2b54667506e90cc296721b2e658" title="Invalid Data size.">NRF_ERROR_DATA_SIZE</a></td><td>Invalid SDU length supplied, must not be more than <a class="el" href="structble__l2cap__ch__tx__params__t.html#a5a4b7a0a4a9a74ca0d72e263ddb856a2">ble_l2cap_ch_tx_params_t::tx_mtu</a> provided in <a class="el" href="group___b_l_e___l2_c_a_p___e_n_u_m_e_r_a_t_i_o_n_s.html#gga200c8684032d8e5fe10d295b2f3a1555a56f73fdbd26acabcd77f6dea45585b78">BLE_L2CAP_EVT_CH_SETUP</a> event. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__nrf__error.html#gac94383171545e604e8347a044e8be13f" title="Not enough resources for operation.">NRF_ERROR_RESOURCES</a></td><td>Too many SDUs queued for transmission. Wait for a <a class="el" href="group___b_l_e___l2_c_a_p___e_n_u_m_e_r_a_t_i_o_n_s.html#gga200c8684032d8e5fe10d295b2f3a1555afa2b40e6fe7691496fded82199a5e7a1">BLE_L2CAP_EVT_CH_TX</a> event and retry. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://iotready.co"> IoTReady </a><img class="footer" src="logo.png" width="30" height="30" alt="IoTReady"/></a></li>
  </ul>
</div>
</body>
</html>
